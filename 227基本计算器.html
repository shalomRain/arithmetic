<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      // 给你一个字符串表达式 s ， 请你实现一个基本计算器来计算并返回它的值。

      // 整数除法仅保留整数部分

      /**
       * @param {string} s
       * @return {number}
       */
      var calculate = function (s) {
        // 拿到一个字符串，根据+-*/来截取数组
        // 拆解 + - * /  3 + 5 * 10
        // 从左往右，如果遇到 * or / ,取除 * / 前面 or 后面的两个数值, 然后继续递归(感觉这里可以使用动态规划)
        let arr = s.split("")
        let newArr = []
        let str = ""
        for (let i = 0; i < arr.length; i++) {
          if (
            arr[i] == "+" ||
            arr[i] == "-" ||
            arr[i] == "*" ||
            arr[i] == "/"
          ) {
            newArr.push(str)
            newArr.push(arr[i])
            str = ""
          } else {
            str += arr[i]
            if (i == arr.length - 1) newArr.push(str)
          }
        }
        console.log(newArr)
        let multiplication = newArr.indexOf("*")
        let divide = newArr.indexOf("/")
        let add = newArr.indexOf("+")
        let sub = newArr.indexOf("-")

        let MulDiv = multiplication > divide ? divide : multiplication
        let addSub = add > sub ? sub : add
        if (MulDiv > 0) {
          let num = 0;
          if (newArr[MulDiv] == "*") {
            num = newArr[MulDiv - 1] * newArr[MulDiv + 1]
            console.log(num)
            newArr.splice(newArr[MulDiv - 1], 3)
          } else {
            console.log(newArr[MulDiv - 1] / newArr[MulDiv + 1])
          }
          newArr.splice(newArr[MulDiv - 1], 3, )
        } else if (addSub > 0) {
          if (newArr[addSub] == "+") {
            console.log(Number(newArr[addSub - 1]) + Number(newArr[addSub + 1]))
          } else {
            console.log(Number(newArr[addSub - 1]) - Number(newArr[addSub + 1]))
          }
        } else {
          console.log(newArr)
        }

        // if (multiplication > -1 || divide > -1) {
        //   // 先判断乘除
        //   // 比较其下标，越小就先算
        //   if (multiplication > divide) {
        //     // 除法优先
        //   } else {
        //     // 乘法优先

        //     let addTwo = arr.slice(0, multiplication).lastIndexOf("+")
        //     let subTwo = arr.slice(0, multiplication).lastIndexOf("-")
        //     // 如果不存在 如果存在
        //     if (addTwo > -1 || subTwo > -1) {
        //       if (addTwo > subTwo) {
        //       } else {
        //       }
        //     } else {
        //       // 前一个值为
        //       let firstNum = arr.slice(0, multiplication)
        //     }
        //   }

        //   if (addTwo || subTwo) {
        //   }
        // }
      }
      calculate("11+511-100+7")
    </script>
  </body>
</html>
