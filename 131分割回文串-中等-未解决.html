<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        /**
         * @param {string} s
         * @return {string[][]}
         */

        
        // 回溯 + 动态规划预处理
        var partition = function (s) {
            const dfs = (i) => {
                if (i === n) {
                    ret.push(ans.slice());
                    return;
                }
                for (let j = i; j < n; ++j) {
                    if (f[i][j]) {
                        ans.push(s.slice(i, j + 1));
                        dfs(j + 1);
                        ans.pop();
                    }
                }
            }

            const n = s.length; // 字符串的长度
            const f = new Array(n).fill(0).map(() => new Array(n).fill(true));//[[true,...,true]...[true,...,true]]
            let ret = [],
                ans = [];

            for (let i = n - 1; i >= 0; --i) {
                for (let j = i + 1; j < n; ++j) {
                    f[i][j] = (s[i] === s[j]) && f[i + 1][j - 1];
                }
            }
            dfs(0);
            return ret;
        };
        partition("aabbaacdc")
    </script>
</body>

</html>