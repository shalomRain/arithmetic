<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      let str = "\{{}[]}()";
      let str  = "[({])}" // 校验不成功
      //   let arr = str.split("");

      //   // 0 05 14 5 23
      //   let gather = ["{", "[", "(", ")", "]", "}"];
      //   arr.forEach((item, index) => {
      //     let params = gather.indexOf(item);
      //     if (params > 2) {
      //       for (let i = index-1; 0 <= i; i = i - 2) {
      //           let newParams = gather.indexOf(arr.slice(0,index)[i])
      //           if(params + newParams == 5){
      //               console.log(index,params)
      //               console.log(i,newParams)
      //               break;
      //           }
      //       }
      //     }
      //   });

      /**
       * @param {string} s
       * @return {boolean}
       */

      let gather = ["{", "[", "(", ")", "]", "}"];
      var isValid = function (s) {
        let arr = s.split("");
        let count = 0;
        if (arr.length % 2 == 1) return false;
        let result;
        arr.forEach((item, index) => {
          let params = gather.indexOf(item);
          if (params > 2) {
            for (let i = index - 1; 0 <= i; i = i - 2) {
              let newParams = gather.indexOf(arr.slice(0, index)[i]);
              if (params + newParams == 5) {
                count++;

                break;
              }
            }
          }
          if (index == arr.length - 1) {
            if (count == arr.length / 2) {
              result = true;
            } else {
              result = false;
            }
          }
        });
        return result;
      };

      console.log(isValid(str));
    </script>
  </body>
</html>
