<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      /**
       * // This is the interface that allows for creating nested lists.
       * // You should not implement it, or speculate about its implementation
       * function NestedInteger() {
       *
       *     Return true if this NestedInteger holds a single integer, rather than a nested list.
       *     @return {boolean}
       *     this.isInteger = function() {
       *         ...
       *     };
       *
       *     Return the single integer that this NestedInteger holds, if it holds a single integer
       *     Return null if this NestedInteger holds a nested list
       *     @return {integer}
       *     this.getInteger = function() {
       *         ...
       *     };
       *
       *     Return the nested list that this NestedInteger holds, if it holds a nested list
       *     Return null if this NestedInteger holds a single integer
       *     @return {NestedInteger[]}
       *     this.getList = function() {
       *         ...
       *     };
       * };
       */
      /**
       * @constructor
       * @param {NestedInteger[]} nestedList
       */
      /* var NestedIterator = function (nestedList) {
              //   将数组进行flat
              this.flatArray = nestedList.flat(Infinity)
              this.index = 0
            } */

      /**
       * @this NestedIterator
       * @returns {boolean}
       */
      /* NestedIterator.prototype.hasNext = function () {
                if(this.flatArray[this.index] != undefined){
                    return true
                }
                return false
            } */

      /**
       * @this NestedIterator
       * @returns {integer}
       */
      /*   NestedIterator.prototype.next = function () {
              let int = this.flatArray[this.index]
              this.index++
              return int
            } */

      /* *
       * Your NestedIterator will be called like this:
       * var i = new NestedIterator(nestedList), a = [];
       * while (i.hasNext()) a.push(i.next());
       */

      //   var NestedIterator = function (nestedList) {
      //     let newArr = []
      //     //   将数组进行flat
      //     function flat(nestedList) {
      //       for (let i = 0; i < nestedList.length; i++) {
      //         if (Array.isArray(nestedList[i])) {
      //           flat(nestedList[i])
      //         } else {
      //            newArr.push(nestedList[i])
      //         }
      //       }
      //     }
      //     flat(nestedList)
      //     this.flatArray = newArr
      //     this.index = 0;
      //   }

      //   /**
      //    * @this NestedIterator
      //    * @returns {boolean}
      //    */
      //   NestedIterator.prototype.hasNext = function () {
      //     if (this.flatArray[this.index] != undefined) {
      //       return true
      //     }
      //     return false
      //   }

      //   /**
      //    * @this NestedIterator
      //    * @returns {integer}
      //    */
      //   NestedIterator.prototype.next = function () {
      //     let int = this.flatArray[this.index]
      //     this.index++
      //     return int
      //   }

      /**
       * // This is the interface that allows for creating nested lists.
       * // You should not implement it, or speculate about its implementation
       * function NestedInteger() {
       *
       *     Return true if this NestedInteger holds a single integer, rather than a nested list.
       *     @return {boolean}
       *     this.isInteger = function() {
       *         ...
       *     };
       *
       *     Return the single integer that this NestedInteger holds, if it holds a single integer
       *     Return null if this NestedInteger holds a nested list
       *     @return {integer}
       *     this.getInteger = function() {
       *         ...
       *     };
       *
       *     Return the nested list that this NestedInteger holds, if it holds a nested list
       *     Return null if this NestedInteger holds a single integer
       *     @return {NestedInteger[]}
       *     this.getList = function() {
       *         ...
       *     };
       * };
       */
      /**
       * @constructor
       * @param {NestedInteger[]} nestedList
       */

      var NestedIterator = function (nestedList) {
        vals = []
        const dfs = nestedList => {
          for (const nest of nestedList) {
            if (Array.isArray(nest)) {
              dfs(nest)
            } else {
              vals.push(nest)
            }
          }
        }
        dfs(nestedList)
      }

      NestedIterator.prototype.hasNext = function () {
        return vals.length > 0
      }

      NestedIterator.prototype.next = function () {
        const val = vals[0]
        vals = vals.slice(1)
        return val
      }

      let nestedList = [[1, 1, [9]], 2, [1, 1]]
      let i = new NestedIterator(nestedList),
        a = []
      while (i.hasNext()) a.push(i.next())
      console.log(a)
    </script>
  </body>
</html>
