<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      //   // 改变数组中的一个值，使其能够成为递增数列  3 4 2 3
    //   var checkPossibility = function (nums) {
    //     let count = 0
    //     // 前面的数要大于等于后面的数
    //     for (let i = 0; i < nums.length - 1; i++) {
    //       if (nums[i] > nums[i + 1]) {
    //         count++
    //         // 递减的情况
    //         if (i - 1 >= 0) {
    //           if (nums[i - 1] <= nums[i + 1]) {
    //             nums[i] = nums[i + 1]
    //           } else {
    //             nums[i + 1] = nums[i]
    //           }
    //         } else {
    //           nums[i] = nums[i + 1]
    //         }

    //         if (count > 1) {
    //           return false
    //         }
    //         // 让nums[i] = nums[i+1] 还是 nums[i+1] = nums[i],取决于
    //         // 如果 nums[i] = nums[i+1] 则要保证 nums[i-1]<nums[i+1],
    //         // 否则 nums[i+1] = nums[i]
    //       }
    //     }
    //     if (count <= 1) return true
    //   }

      // 改变数组中的一个值，使其能够成为递增数列  3 4 2 3
      var checkPossibility = function (nums) {
        let count = 0
        // 前面的数大于后面的数
        if (nums[0] > nums[1]) {
          count++
          nums[0] = nums[1]
        }
        for (let i = 1; i < nums.length - 1; i++) {
          if (nums[i] > nums[i + 1]) {
            count++
            // 递减的情况
            if (nums[i - 1] > nums[i + 1]) {
              nums[i + 1] = nums[i]
            } else {
              nums[i] = nums[i + 1]
            }

            if (count > 1) {
              return false
            }
          }
        }
        if (count <= 1) return true
      }
      let a = [4, 2, 3] // true
      let b = [4, 2, 1] // false
      let c = [3, 4, 2, 3] // false
      let d = [1, 4, 1, 2] // true
      console.log(checkPossibility(a))
      console.log(checkPossibility(b))
      console.log(checkPossibility(c))
      console.log(checkPossibility(d))
    </script>
  </body>
</html>
